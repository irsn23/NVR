# NVR

## 什么是 NVR

NVR 是你推的 VR 主播在播吗的简称。这也是该应用程序的主要功能：双击 NVR.exe，点击最下方按钮，等待一段时间后就可以看到所有现在正在直播的 VR 主播。 

## 参数设置

APP 目前拥有以下两个参数：

- `Type`: 查询类型（默认为并行查询）
  - 并行查询：以并行方式进行查询，速度最快，但是可能被封 ip
  - 串行查询：以串行方式进行查询，速度很慢，但是不会被封
  - 穷举查询：进入各直播间进行查询，速度最慢，但是不会遗漏且没有直播间标题
- `Depth`：查询页数（默认为 200）。该变量指示查询的页数（具体含义与 Api 有关），仅并行与串行查询使用。该页数存在理论上限值，因此，当串行查询指定高于该页数的深度时，也不会进行额外查询。一般来说，指定在理论上限值以下的页数越大，查询耗时越长，该方法错过的虚拟主播越少。

## APP 使用指南

- 指定参数。用户可在第一个下拉框中指定查询类型，默认为并行，在第二个输入框内指定查询深度，默认为 `200`。
- 进行查询。点击最下方的按钮即可开始查询。注意：在点击该按钮后，按钮会显示 `正在查询，请稍候...` 字样，然后 APP 会无法响应（卡顿）一段时间，具体时长取决于电脑性能、网速、指定的查询深度、查询类型等，但这一般不是 APP 无法工作的标志。
- 查看查询结果
  - 在中间的表中会返回当前的查询结果。最左边一列为序号，最上面一列为表头，分别表示虚拟主播的名称（其 B 站昵称）、直播间标题（如果指定的查询类型不是穷举）、UID、直播间 ID 以及直播间的**超链接**。
  - 该表无法修改。用户可通过单击最后一列的直播间链接则可自动使用默认网页打开该链接。
  - 该表内容没有自动换行或者固定大小的设置，所以如果直播间标题显示不全的，可以使用鼠标拖动格边缘以自定义大小。
- 进行第二次查询。查询完成后，按钮字样将变为于 xx 生成完成，请再次点击以进行下一次查询，其中 xx 为当前时间。每次点击查询按钮时，查询的参数设置都会使用最新指定的参数。
- 该 APP 会使用 exe 文件夹中的 `data.csv` 中的数据进行查询。用户可以按该组织架构修改或者增删 `data.csv` 中的对应数据以进行定制化查询。

## 更新频率

这可能是最终版本，可能不会存在更新。

## 注意事项

- 不推荐在一次并行查询结束后直接进行下一次查询，这很有可能导致封 ip，此时第二次并行查询结果为空值。
- 指定参数只能为正整数，若为其他输入可能出现未知错误。
- 当因网络不当等理由导致 APP 内程序未按既定轨道运行完成时，APP 可能会出现预料以外的行为，但是绝大多数时候 APP 只会直接退出。所以，如果发现点击按钮后 APP 直接退出，这一般意味着输入异常、网络不畅等。
- 如果使用并行查询没有查询到正在直播的主播，可能是 
  - 深度设置过浅，可以调整 `Depth` 参数。
  - 主播未在规定分区直播，可以在 `data.csv` 文件中增加分区。
  - ip 被 ban，这可以通过直接前往网页端对应分区发现功能异常看出，在遇到这样的情况时请在一段时间后再进行查询或者使用串行方式查询。

## 其他事项

该 APP 是由 `pyinstaller` 自动生成，生成指令为 `pyinstaller --add-data "data.csv;." -F -w app.py`，理论上可以直接使用。如果不想或者不能使用 APP，也可尝试：

- 运行 `local.py`，这提供了一个可以直接运行的，支持查询类型为并行、串行或穷举的（默认为并行查询），查询深度为默认值 `200 `的接口。运行的结果会直接出现在输出栏中。
- 运行 `app.py`，这理论上是运行 `NVR.exe` 时自动运行的代码，所以直接手动运行 `app.py` 理论上可以获得与直接运行 `exe` 相同的结果。